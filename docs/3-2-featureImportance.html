<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="DALEX: Descriptive mAchine Learning EXplanations" />
<meta property="og:type" content="book" />


<meta property="og:description" content="Do not trust a black-box model. Unless it explains itself." />
<meta name="github-repo" content="rstudio/bookdown-demo" />

<meta name="author" content="Przemysław Biecek" />

<meta name="date" content="2018-04-02" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="Do not trust a black-box model. Unless it explains itself.">

<title>DALEX: Descriptive mAchine Learning EXplanations</title>

<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="toc.css" type="text/css" />

</head>

<body>



<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="has-sub"><a href="index.html#introduction"><span class="toc-section-number">1</span> Introduction</a><ul>
<li class="has-sub"><a href="1-1-motivation.html#motivation"><span class="toc-section-number">1.1</span> Motivation</a><ul>
<li><a href="1-1-motivation.html#why-dalex"><span class="toc-section-number">1.1.1</span> Why DALEX?</a></li>
<li><a href="1-1-motivation.html#to-validate"><span class="toc-section-number">1.1.2</span> To validate</a></li>
<li><a href="1-1-motivation.html#to-understand"><span class="toc-section-number">1.1.3</span> To understand</a></li>
<li><a href="1-1-motivation.html#to-improve"><span class="toc-section-number">1.1.4</span> To improve</a></li>
</ul></li>
<li><a href="1-2-trivia.html#trivia"><span class="toc-section-number">1.2</span> Trivia</a></li>
</ul></li>
<li class="has-sub"><a href="2-architecture.html#architecture"><span class="toc-section-number">2</span> Architecture of DALEX</a><ul>
<li><a href="2-1-explainFunction.html#explainFunction"><span class="toc-section-number">2.1</span> The <code>explain()</code> function</a></li>
<li class="has-sub"><a href="2-2-use-case-regression-apartment-prices-in-warsaw.html#use-case-regression.-apartment-prices-in-warsaw"><span class="toc-section-number">2.2</span> Use case: Regression. Apartment prices in Warsaw</a><ul>
<li><a href="2-2-use-case-regression-apartment-prices-in-warsaw.html#linear-regression"><span class="toc-section-number">2.2.1</span> Linear regression</a></li>
<li><a href="2-2-use-case-regression-apartment-prices-in-warsaw.html#random-forest"><span class="toc-section-number">2.2.2</span> Random forest</a></li>
</ul></li>
<li><a href="2-3-use-case-classification-tbd.html#use-case-classification.-tbd"><span class="toc-section-number">2.3</span> Use case: Classification. TBD</a></li>
</ul></li>
<li class="has-sub"><a href="3-modelUnderstanding.html#modelUnderstanding"><span class="toc-section-number">3</span> Model understanding</a><ul>
<li><a href="3-1-modelPerformance.html#modelPerformance"><span class="toc-section-number">3.1</span> Model performance</a></li>
<li class="has-sub"><a href="3-2-featureImportance.html#featureImportance"><span class="toc-section-number">3.2</span> Feature importance</a><ul>
<li><a href="3-2-featureImportance.html#drop-out-plots"><span class="toc-section-number">3.2.1</span> Drop-out plots</a></li>
<li><a href="3-2-featureImportance.html#forest-plots"><span class="toc-section-number">3.2.2</span> Forest plots</a></li>
</ul></li>
<li class="has-sub"><a href="3-3-variableResponse.html#variableResponse"><span class="toc-section-number">3.3</span> Variable response</a><ul>
<li><a href="3-3-variableResponse.html#pdpchapter"><span class="toc-section-number">3.3.1</span> Partial Dependence Plot</a></li>
<li><a href="3-3-variableResponse.html#model-comparisons"><span class="toc-section-number">3.3.2</span> Model Comparisons</a></li>
<li><a href="3-3-variableResponse.html#accumulated-local-effects-plot"><span class="toc-section-number">3.3.3</span> Accumulated Local Effects Plot</a></li>
<li><a href="3-3-variableResponse.html#individual-conditional-expectation-plot"><span class="toc-section-number">3.3.4</span> Individual Conditional Expectation Plot</a></li>
<li><a href="3-3-variableResponse.html#mering-path-plot"><span class="toc-section-number">3.3.5</span> Mering Path Plot</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="4-predictionUnderstanding.html#predictionUnderstanding"><span class="toc-section-number">4</span> Prediction understanding</a><ul>
<li><a href="4-1-outlier-detection.html#outlier-detection"><span class="toc-section-number">4.1</span> Outlier detection</a></li>
<li class="has-sub"><a href="4-2-predictionBreakdown.html#predictionBreakdown"><span class="toc-section-number">4.2</span> Prediction breakdown</a><ul>
<li><a href="4-2-predictionBreakdown.html#basics"><span class="toc-section-number">4.2.1</span> Basics</a></li>
</ul></li>
<li><a href="4-3-local-interpretable-model-agnostic-visual-explanations.html#local-interpretable-model-agnostic-visual-explanations"><span class="toc-section-number">4.3</span> Local Interpretable (Model-agnostic) Visual Explanations</a></li>
<li class="has-sub"><a href="4-4-breakdown.html#breakdown"><span class="toc-section-number">4.4</span> breakDown</a><ul>
<li><a href="4-4-breakdown.html#model-comparisons-1"><span class="toc-section-number">4.4.1</span> Model Comparisons</a></li>
</ul></li>
</ul></li>
<li><a href="5-reproducibility.html#reproducibility"><span class="toc-section-number">5</span> Reproducibility</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="featureImportance" class="section level2">
<h2><span class="header-section-number">3.2</span> Feature importance</h2>
<p>Explainers presented in this chapter are designed to better understand the global structure of a black box. Which variables are the most important? How do they influence the final result of a model?</p>
<div id="drop-out-plots" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Drop-out plots</h3>
<p>Variable drop-outs are calculated via permutations. Simply the loss function is is compared between the full model and the model with single variable being permuted.</p>
<p>As a additional point for comparison a <code>_baseline_</code> is calculated as a loss in model with permuted outcomes. This shall be highest possible loss.</p>
<p>Let’s see how it’s working for a random forest model.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">library</span>(<span class="st">&quot;DALEX&quot;</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">library</span>(<span class="st">&quot;breakDown&quot;</span>)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="kw">library</span>(<span class="st">&quot;randomForest&quot;</span>)</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">HR_rf_model &lt;-<span class="st"> </span><span class="kw">randomForest</span>(left<span class="op">~</span>., <span class="dt">data =</span> HR_data, <span class="dt">ntree =</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">HR_rf_model</a></code></pre></div>
<pre><code>## 
## Call:
##  randomForest(formula = left ~ ., data = HR_data, ntree = 100) 
##                Type of random forest: regression
##                      Number of trees: 100
## No. of variables tried at each split: 3
## 
##           Mean of squared residuals: 0.009666977
##                     % Var explained: 94.67</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">explainer_rf  &lt;-<span class="st"> </span><span class="kw">explain</span>(HR_rf_model, <span class="dt">data =</span> HR_data, <span class="dt">y =</span> HR_data<span class="op">$</span>left)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">explainer_rf</a></code></pre></div>
<pre><code>## Model label:  randomForest 
## Model class:  randomForest.formula,randomForest 
## Data head  :
##   satisfaction_level last_evaluation number_project average_montly_hours
## 1               0.38            0.53              2                  157
## 2               0.80            0.86              5                  262
##   time_spend_company Work_accident left promotion_last_5years sales salary
## 1                  3             0    1                     0 sales    low
## 2                  6             0    1                     0 sales medium</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">vd_rf &lt;-<span class="st"> </span><span class="kw">variable_dropout</span>(explainer_rf, <span class="dt">type =</span> <span class="st">&quot;raw&quot;</span>)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">vd_rf</a></code></pre></div>
<pre><code>##                 variable dropout_loss        label
## 1           _full_model_     3.403976 randomForest
## 2                   left     3.403976 randomForest
## 3          Work_accident     4.091382 randomForest
## 4  promotion_last_5years     4.096743 randomForest
## 5                 salary     6.131875 randomForest
## 6                  sales    12.572823 randomForest
## 7     time_spend_company    75.494823 randomForest
## 8   average_montly_hours    94.835348 randomForest
## 9        last_evaluation   103.034260 randomForest
## 10        number_project   121.163586 randomForest
## 11    satisfaction_level   175.496817 randomForest
## 12            _baseline_   362.723248 randomForest</code></pre>
<p>Now we can plot these losses. Note that in the plot beow you see not only the variable importance, but also you see how the whole model works.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">plot</span>(vd_rf)</a></code></pre></div>
<p><img src="DALEX_files/figure-html/unnamed-chunk-12-1.png" width="672"  /></p>
<p>And here we have similar example for glm model.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">HR_glm_model &lt;-<span class="st"> </span><span class="kw">glm</span>(left<span class="op">~</span>., <span class="dt">data =</span> breakDown<span class="op">::</span>HR_data, <span class="dt">family =</span> <span class="st">&quot;binomial&quot;</span>)</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">explainer_glm &lt;-<span class="st"> </span><span class="kw">explain</span>(HR_glm_model, <span class="dt">data =</span> HR_data, <span class="dt">y =</span> HR_data<span class="op">$</span>left)</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">logit &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">exp</span>(x)<span class="op">/</span>(<span class="dv">1</span><span class="op">+</span><span class="kw">exp</span>(x))</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">vd_glm &lt;-<span class="st"> </span><span class="kw">variable_dropout</span>(explainer_glm, <span class="dt">type =</span> <span class="st">&quot;raw&quot;</span>,</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">                        <span class="dt">loss_function =</span> <span class="cf">function</span>(observed, predicted) <span class="kw">sum</span>((observed <span class="op">-</span><span class="st"> </span><span class="kw">logit</span>(predicted))<span class="op">^</span><span class="dv">2</span>))</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">vd_glm</a></code></pre></div>
<pre><code>##                 variable dropout_loss label
## 1           _full_model_     148.2154    lm
## 2                  sales     147.6929    lm
## 3                   left     148.2154    lm
## 4        last_evaluation     148.6625    lm
## 5  promotion_last_5years     149.1697    lm
## 6   average_montly_hours     149.8500    lm
## 7     time_spend_company     155.6569    lm
## 8          Work_accident     156.6150    lm
## 9         number_project     157.1102    lm
## 10                salary     159.5620    lm
## 11    satisfaction_level     210.3931    lm
## 12            _baseline_     234.2673    lm</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">plot</span>(vd_glm)</a></code></pre></div>
<p><img src="DALEX_files/figure-html/unnamed-chunk-13-1.png" width="672"  /></p>
<p>And for xgboost model.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw">library</span>(<span class="st">&quot;xgboost&quot;</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">model_martix_train &lt;-<span class="st"> </span><span class="kw">model.matrix</span>(left<span class="op">~</span>.<span class="op">-</span><span class="dv">1</span>, breakDown<span class="op">::</span>HR_data)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">data_train &lt;-<span class="st"> </span><span class="kw">xgb.DMatrix</span>(model_martix_train, <span class="dt">label =</span> breakDown<span class="op">::</span>HR_data<span class="op">$</span>left)</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">param &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">max_depth =</span> <span class="dv">2</span>, <span class="dt">eta =</span> <span class="dv">1</span>, <span class="dt">silent =</span> <span class="dv">1</span>, <span class="dt">nthread =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb22-5" data-line-number="5">              <span class="dt">objective =</span> <span class="st">&quot;binary:logistic&quot;</span>, <span class="dt">eval_metric =</span> <span class="st">&quot;auc&quot;</span>)</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">HR_xgb_model &lt;-<span class="st"> </span><span class="kw">xgb.train</span>(param, data_train, <span class="dt">nrounds =</span> <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb22-7" data-line-number="7">explainer_xgb &lt;-<span class="st"> </span><span class="kw">explain</span>(HR_xgb_model, <span class="dt">data =</span> model_martix_train, <span class="dt">y =</span> HR_data<span class="op">$</span>left, <span class="dt">label =</span> <span class="st">&quot;xgboost&quot;</span>)</a>
<a class="sourceLine" id="cb22-8" data-line-number="8">vd_xgb &lt;-<span class="st"> </span><span class="kw">variable_dropout</span>(explainer_xgb, <span class="dt">type =</span> <span class="st">&quot;raw&quot;</span>)</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">vd_xgb</a></code></pre></div>
<pre><code>##                 variable dropout_loss   label
## 1           _full_model_     21.67767 xgboost
## 2  promotion_last_5years     21.49137 xgboost
## 3        salesaccounting     21.67767 xgboost
## 4                salesIT     21.67767 xgboost
## 5        salesmanagement     21.67767 xgboost
## 6         salesmarketing     21.67767 xgboost
## 7             salessales     21.69725 xgboost
## 8           salessupport     21.70053 xgboost
## 9                saleshr     21.83243 xgboost
## 10            salesRandD     21.83944 xgboost
## 11      salesproduct_mng     22.16233 xgboost
## 12        salestechnical     22.23103 xgboost
## 13         Work_accident     22.26913 xgboost
## 14          salarymedium     22.29388 xgboost
## 15             salarylow     22.88619 xgboost
## 16        number_project     50.37944 xgboost
## 17       last_evaluation     54.52725 xgboost
## 18  average_montly_hours     55.80716 xgboost
## 19    time_spend_company     73.78573 xgboost
## 20    satisfaction_level    149.42161 xgboost
## 21            _baseline_    361.96074 xgboost</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw">plot</span>(vd_xgb)</a></code></pre></div>
<p><img src="DALEX_files/figure-html/unnamed-chunk-14-1.png" width="672"  /></p>
<p>Of course you can plot all these models in a single plot. Then it is much easier to compare variable importances in different models.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">plot</span>(vd_rf, vd_glm, vd_xgb)</a></code></pre></div>
<p><img src="DALEX_files/figure-html/unnamed-chunk-15-1.png" width="672"  /></p>
<p><em>NOTE:</em> If you like to have all importances hooked to 0, you can do this as well</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">vd_rf &lt;-<span class="st"> </span><span class="kw">variable_dropout</span>(explainer_rf, <span class="dt">type =</span> <span class="st">&quot;difference&quot;</span>)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">vd_glm &lt;-<span class="st"> </span><span class="kw">variable_dropout</span>(explainer_glm, <span class="dt">type =</span> <span class="st">&quot;difference&quot;</span>,</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">                        <span class="dt">loss_function =</span> <span class="cf">function</span>(observed, predicted) <span class="kw">sum</span>((observed <span class="op">-</span><span class="st"> </span><span class="kw">logit</span>(predicted))<span class="op">^</span><span class="dv">2</span>))</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">vd_xgb &lt;-<span class="st"> </span><span class="kw">variable_dropout</span>(explainer_xgb, <span class="dt">type =</span> <span class="st">&quot;difference&quot;</span>)</a>
<a class="sourceLine" id="cb26-5" data-line-number="5"><span class="kw">plot</span>(vd_rf, vd_glm, vd_xgb)</a></code></pre></div>
<p><img src="DALEX_files/figure-html/unnamed-chunk-16-1.png" width="672"  /></p>
</div>
<div id="forest-plots" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Forest plots</h3>
<p><a href="https://en.wikipedia.org/wiki/Forest_plot">Forest plots</a> were initially used in the meta analysis to visualise effects in different studies. But now they are frequently used to present summary characteristics for models with linear structure like these created with <code>lm</code> or <code>glm</code> functions.</p>
<p>There are various implementations of forest plots in R. Below we present examples for a glm model.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">library</span>(<span class="st">&quot;breakDown&quot;</span>)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2">HR_glm_model &lt;-<span class="st"> </span><span class="kw">glm</span>(left<span class="op">~</span>., <span class="dt">data =</span> HR_data, <span class="dt">family =</span> <span class="st">&quot;binomial&quot;</span>)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3"></a>
<a class="sourceLine" id="cb27-4" data-line-number="4"></a>
<a class="sourceLine" id="cb27-5" data-line-number="5"><span class="co">#HR_glm_model &lt;- archivist::aread(&quot;pbiecek/DALEX/arepo/8fe19a108faf3ddfcabc3de3a0693234&quot;)</span></a></code></pre></div>
<p>In the package <strong>forestmodel</strong> (see <span class="citation">(Kennedy <label for="tufte-mn-13" class="margin-toggle">&#8853;</label><input type="checkbox" id="tufte-mn-13" class="margin-toggle">2017<span class="marginnote">Kennedy, Nick. 2017. <em>Forestmodel: Forest Plots from Regression Models</em>. <a href="https://CRAN.R-project.org/package=forestmodel" class="uri">https://CRAN.R-project.org/package=forestmodel</a>.</span>)</span>) one can use <code>forest_model()</code> function to draw a forest plot. This package is based on the <strong>broom</strong> package (see <span class="citation">(Robinson <label for="tufte-mn-14" class="margin-toggle">&#8853;</label><input type="checkbox" id="tufte-mn-14" class="margin-toggle">2017<span class="marginnote">Robinson, David. 2017. <em>Broom: Convert Statistical Analysis Objects into Tidy Data Frames</em>. <a href="https://CRAN.R-project.org/package=broom" class="uri">https://CRAN.R-project.org/package=broom</a>.</span>)</span>) and this is why it handles a large variety of different regression models. An example for <code>glm</code>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw">library</span>(<span class="st">&quot;forestmodel&quot;</span>)</a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="kw">forest_model</span>(HR_glm_model)</a></code></pre></div>
<div class="figure"><span id="fig:forestmodel"></span>
<p class="caption marginnote shownote">
Figure 3.1: Forest plot created with forestmodel package
</p>
<img src="DALEX_files/figure-html/forestmodel-1.png" alt="Forest plot created with forestmodel package" width="768"  />
</div>
<p>In the package <strong>sjPlot</strong> (see <span class="citation">(Lüdecke <label for="tufte-mn-15" class="margin-toggle">&#8853;</label><input type="checkbox" id="tufte-mn-15" class="margin-toggle">2017<span class="marginnote">Lüdecke, Daniel. 2017. <em>SjPlot: Data Visualization for Statistics in Social Science</em>. <a href="https://CRAN.R-project.org/package=sjPlot" class="uri">https://CRAN.R-project.org/package=sjPlot</a>.</span>)</span>) one can use <code>sjp.*()</code> to visualise structure of a <code>*</code> model or a wrapper <code>plot_model()</code>. Here is an example for <code>glm</code> model.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw">library</span>(<span class="st">&quot;sjPlot&quot;</span>)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="kw">plot_model</span>(HR_glm_model, <span class="dt">type =</span> <span class="st">&quot;est&quot;</span>, <span class="dt">sort.est =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="figure"><span id="fig:sjpglm"></span>
<p class="caption marginnote shownote">
Figure 3.2: Forest plot created with sjPlot package
</p>
<img src="DALEX_files/figure-html/sjpglm-1.png" alt="Forest plot created with sjPlot package" width="768"  />
</div>
<p><strong>Note!</strong></p>
<p>The <strong>forestmodel</strong> package handles factor variables in a better way while the plots from <strong>sjPlot</strong> are easier to read.</p>
</div>
</div>
<p style="text-align: center;">
<a href="3-1-modelPerformance.html"><button class="btn btn-default">Previous</button></a>
<a href="https://github.com/pbiecek/DALEX/edit/master/02-global.Rmd"><button class="btn btn-default">Edit</button></a>
<a href="3-3-variableResponse.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>



</body>
</html>
