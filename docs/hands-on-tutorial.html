<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>DALEX: Descriptive mAchine Learning EXplanations</title>
  <meta name="description" content="Do not trust a black-box model. Unless it explains itself.">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="DALEX: Descriptive mAchine Learning EXplanations" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Do not trust a black-box model. Unless it explains itself." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="DALEX: Descriptive mAchine Learning EXplanations" />
  
  <meta name="twitter:description" content="Do not trust a black-box model. Unless it explains itself." />
  

<meta name="author" content="MI2DataLab">


<meta name="date" content="2018-01-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="reproducibility.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The DALEX project</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#notation"><i class="fa fa-check"></i><b>1.1</b> Notation</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#use-case---human-resources-analytics"><i class="fa fa-check"></i><b>1.2</b> Use case - Human Resources Analytics</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#logistic-regression"><i class="fa fa-check"></i><b>1.2.1</b> Logistic regression</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#random-forest"><i class="fa fa-check"></i><b>1.2.2</b> Random forest</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#use-case---wine-quality"><i class="fa fa-check"></i><b>1.3</b> Use case - Wine quality</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#linear-regression"><i class="fa fa-check"></i><b>1.3.1</b> Linear regression</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#trivia"><i class="fa fa-check"></i><b>1.4</b> Trivia</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="global-structure.html"><a href="global-structure.html"><i class="fa fa-check"></i><b>2</b> Global structure</a><ul>
<li class="chapter" data-level="2.1" data-path="global-structure.html"><a href="global-structure.html#forest-plots"><i class="fa fa-check"></i><b>2.1</b> Forest plots</a></li>
<li class="chapter" data-level="2.2" data-path="global-structure.html"><a href="global-structure.html#variable-importance-plot"><i class="fa fa-check"></i><b>2.2</b> Variable Importance Plot</a></li>
<li class="chapter" data-level="2.3" data-path="global-structure.html"><a href="global-structure.html#ctree"><i class="fa fa-check"></i><b>2.3</b> ctree</a></li>
<li class="chapter" data-level="2.4" data-path="global-structure.html"><a href="global-structure.html#randomforestexplainer"><i class="fa fa-check"></i><b>2.4</b> RandomForestExplainer</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="conditional-structure.html"><a href="conditional-structure.html"><i class="fa fa-check"></i><b>3</b> Conditional structure</a><ul>
<li class="chapter" data-level="3.1" data-path="conditional-structure.html"><a href="conditional-structure.html#pdpchapter"><i class="fa fa-check"></i><b>3.1</b> Partial Dependence Plot</a></li>
<li class="chapter" data-level="3.2" data-path="conditional-structure.html"><a href="conditional-structure.html#individual-conditional-expectation-plot"><i class="fa fa-check"></i><b>3.2</b> Individual Conditional Expectation Plot</a></li>
<li class="chapter" data-level="3.3" data-path="conditional-structure.html"><a href="conditional-structure.html#accumulated-local-effects-plot"><i class="fa fa-check"></i><b>3.3</b> Accumulated Local Effects Plot</a></li>
<li class="chapter" data-level="3.4" data-path="conditional-structure.html"><a href="conditional-structure.html#mering-path-plot"><i class="fa fa-check"></i><b>3.4</b> Mering Path Plot</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="local-structure.html"><a href="local-structure.html"><i class="fa fa-check"></i><b>4</b> Local structure</a><ul>
<li class="chapter" data-level="4.1" data-path="local-structure.html"><a href="local-structure.html#local-interpretable-model-agnostic-visual-explanations"><i class="fa fa-check"></i><b>4.1</b> Local Interpretable (Model-agnostic) Visual Explanations</a></li>
<li class="chapter" data-level="4.2" data-path="local-structure.html"><a href="local-structure.html#breakdown"><i class="fa fa-check"></i><b>4.2</b> breakDown</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="model-performance.html"><a href="model-performance.html"><i class="fa fa-check"></i><b>5</b> Model performance</a><ul>
<li class="chapter" data-level="5.1" data-path="model-performance.html"><a href="model-performance.html#roc"><i class="fa fa-check"></i><b>5.1</b> ROC</a></li>
<li class="chapter" data-level="5.2" data-path="model-performance.html"><a href="model-performance.html#lift-curve"><i class="fa fa-check"></i><b>5.2</b> Lift curve</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="goodness-of-fit-model-diagnostic.html"><a href="goodness-of-fit-model-diagnostic.html"><i class="fa fa-check"></i><b>6</b> Goodness of fit / Model diagnostic</a><ul>
<li class="chapter" data-level="6.1" data-path="goodness-of-fit-model-diagnostic.html"><a href="goodness-of-fit-model-diagnostic.html#halfnorm-plot"><i class="fa fa-check"></i><b>6.1</b> halfnorm plot</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="reproducibility.html"><a href="reproducibility.html"><i class="fa fa-check"></i><b>7</b> Reproducibility</a></li>
<li class="chapter" data-level="8" data-path="hands-on-tutorial.html"><a href="hands-on-tutorial.html"><i class="fa fa-check"></i><b>8</b> Hands-on tutorial</a><ul>
<li class="chapter" data-level="8.1" data-path="hands-on-tutorial.html"><a href="hands-on-tutorial.html#title"><i class="fa fa-check"></i><b>8.1</b> Title</a></li>
<li class="chapter" data-level="8.2" data-path="hands-on-tutorial.html"><a href="hands-on-tutorial.html#outline"><i class="fa fa-check"></i><b>8.2</b> Outline</a></li>
<li class="chapter" data-level="8.3" data-path="hands-on-tutorial.html"><a href="hands-on-tutorial.html#keywords"><i class="fa fa-check"></i><b>8.3</b> Keywords</a></li>
<li class="chapter" data-level="8.4" data-path="hands-on-tutorial.html"><a href="hands-on-tutorial.html#equipment"><i class="fa fa-check"></i><b>8.4</b> Equipment</a></li>
<li class="chapter" data-level="8.5" data-path="hands-on-tutorial.html"><a href="hands-on-tutorial.html#target-audience"><i class="fa fa-check"></i><b>8.5</b> Target audience</a></li>
<li class="chapter" data-level="8.6" data-path="hands-on-tutorial.html"><a href="hands-on-tutorial.html#motivation"><i class="fa fa-check"></i><b>8.6</b> Motivation</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/MI2DataLab" target="blank">Find more at</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DALEX: Descriptive mAchine Learning EXplanations</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="hands-on-tutorial" class="section level1">
<h1><span class="header-section-number">Chapter 8</span> Hands-on tutorial</h1>
<div id="title" class="section level2">
<h2><span class="header-section-number">8.1</span> Title</h2>
<p>DALEX: Descriptive mAchine Learning EXplanations</p>
<p>Tools for exploration, validation and explanation of complex machine learning models</p>
</div>
<div id="outline" class="section level2">
<h2><span class="header-section-number">8.2</span> Outline</h2>
<p>provide a paragraph with topics to be covered and rough timing</p>
<p>Complex machine learning models are frequently used in predictive modelling. There are a lot of examples for random forest like or boosting like models in medicine, finance, agriculture etc. In this workshop we will show why and how one would analyse the structure of the black-box model.</p>
<p>This will be a hands-on workshop with four parts. In each part there will be a short lecture (around 20-25 minutes) and then time for practice and discussion (around 20-25 min).</p>
<ul>
<li>Introduction</li>
</ul>
<p>Here we will show what problems may arise from blind application of black-box models. Also we will show situations in which the understanding of a model structure leads to model improvements, model stability and larger trust in the model.</p>
<p>During the hands-on part we will fit few complex models (like xgboost, randomForest) with the mlr package and discuss basic diagnostic tools for these models.</p>
<ul>
<li>Conditional Explainers</li>
</ul>
<p>In this part we will introduce techniques for understanding of marginal/conditional response of a model given a one- two- variables. We will cover PDP (Partial Dependence Plots) and ICE (Individual Conditional Expectations) packages for continuous variables and MPP (Merging Path Plot from factorMerger package) for categorical variables.</p>
<ul>
<li>Local Explainers</li>
</ul>
<p>In this part we will introduce techniques that explain key factors that drive single model predictions. This covers Break Down plots for linear models (lm / glm) and tree-based models (randomForestExplainer, xgboostExplainer) along with model agnostic approaches implemented in the live package (an extension of the LIME method).</p>
<ul>
<li>Global Explainers</li>
</ul>
<p>In this part we will introduce tools for global analysis of the black-box model, like variable importance plots, interaction importance plots and tools for model diagnostic.</p>
<p>Literature</p>
<p>Staniak, Mateusz, and Przemysław Biecek. 2017. Live: Local Interpretable (Model-Agnostic) Visual Explanations.</p>
<p>Sitko, Agnieszka, and Przemyslaw Biecek. 2017. FactorMerger: Hierarchical Algorithm for Post-Hoc Testing. <a href="https://github.com/MI2DataLab/factorMerger" class="uri">https://github.com/MI2DataLab/factorMerger</a>.</p>
<p>Greenwell, Brandon M. 2017. “Pdp: An R Package for Constructing Partial Dependence Plots.” The R Journal 9 (1): 421–36. <a href="https://journal.r-project.org/archive/2017/RJ-2017-016/index.html" class="uri">https://journal.r-project.org/archive/2017/RJ-2017-016/index.html</a>.</p>
<p>Goldstein, Alex, Adam Kapelner, Justin Bleich, and Emil Pitkin. 2015. “Peeking Inside the Black Box: Visualizing Statistical Learning with Plots of Individual Conditional Expectation.” Journal of Computational and Graphical Statistics 24 (1): 44–65. <a href="doi:10.1080/10618600.2014.907095" class="uri">doi:10.1080/10618600.2014.907095</a>.</p>
<p>Apley, Dan. 2017. ALEPlot: Accumulated Local Effects (Ale) Plots and Partial Dependence (Pd) Plots. <a href="https://CRAN.R-project.org/package=ALEPlot" class="uri">https://CRAN.R-project.org/package=ALEPlot</a>.</p>
<p>Ribeiro, Marco Tulio, Sameer Singh, and Carlos Guestrin. 2016. “‘Why Should I Trust You?’: Explaining the Predictions of Any Classifier.” In, 1135–44. ACM Press. <a href="doi:10.1145/2939672.2939778" class="uri">doi:10.1145/2939672.2939778</a>.</p>
<p>Biecek, Przemyslaw. 2017. BreakDown: BreakDown Plots. <a href="https://CRAN.R-project.org/package=breakDown" class="uri">https://CRAN.R-project.org/package=breakDown</a>.</p>
</div>
<div id="keywords" class="section level2">
<h2><span class="header-section-number">8.3</span> Keywords</h2>
<p>machine learning, black-box model, model explainers, model auditing, model visualization</p>
</div>
<div id="equipment" class="section level2">
<h2><span class="header-section-number">8.4</span> Equipment</h2>
<p>what do you and participants need</p>
<p>Laptop with preinstalled R and selected packages. All necessary models and dataset will be provided in advance.</p>
</div>
<div id="target-audience" class="section level2">
<h2><span class="header-section-number">8.5</span> Target audience</h2>
<p>Applied data scientists, analysts interested in machine learning models.</p>
</div>
<div id="motivation" class="section level2">
<h2><span class="header-section-number">8.6</span> Motivation</h2>
<p>There are at least three good reasons why this tutoial will be interesting for conference participants.</p>
<ol style="list-style-type: decimal">
<li><p>The topic is super interesting. Even short blog posts on R Bloggers (like <a href="http://smarterpoland.pl/index.php/2017/12/explain-explain-explain/" class="uri">http://smarterpoland.pl/index.php/2017/12/explain-explain-explain/</a>) got lots of reactions. There is a large community around model explainer sin python (the ELI5 package) and there is growing community for R. I had a talk about explainers during the last UseR conference 2017 (<a href="https://user2017.sched.com/event-goers/10415a8ff5675f10deb3fd27b43db5a7" class="uri">https://user2017.sched.com/event-goers/10415a8ff5675f10deb3fd27b43db5a7</a>) more than 500 users sign for it.</p></li>
<li><p>We have developed consistent toolbox of R packages - called DALEX - that supports model explanations. Participants of the workshop will learn easy-to-use tools that can be applied in their every-day data analyses. Methods that we will describe work for most of popular ML models (random forest, glm, boosting).</p></li>
<li><p>Anything related to Machine Learning brings a lot of participants. I’ve attended ML-related workshops during UseR 2015, UseR 2016 and UseR 2017. Demand for such tutorials was always the highest.</p></li>
</ol>
<p>This is why we expect a high interest in this tutorial.</p>

<div id="refs" class="references">
<div>
<p>Apley, Dan. 2017. <em>ALEPlot: Accumulated Local Effects (Ale) Plots and Partial Dependence (Pd) Plots</em>. <a href="https://CRAN.R-project.org/package=ALEPlot" class="uri">https://CRAN.R-project.org/package=ALEPlot</a>.</p>
</div>
<div>
<p>Biecek, Przemyslaw. 2017. <em>BreakDown: BreakDown Plots</em>. <a href="https://CRAN.R-project.org/package=breakDown" class="uri">https://CRAN.R-project.org/package=breakDown</a>.</p>
</div>
<div>
<p>Biecek, Przemyslaw, and Marcin Kosinski. 2017. “archivist: An R Package for Managing, Recording and Restoring Data Analysis Results.” <em>Journal of Statistical Software</em> 82 (11): 1–28. doi:<a href="https://doi.org/10.18637/jss.v082.i11">10.18637/jss.v082.i11</a>.</p>
</div>
<div>
<p>Bischl, Bernd, Michel Lang, Lars Kotthoff, Julia Schiffner, Jakob Richter, Erich Studerus, Giuseppe Casalicchio, and Zachary M. Jones. 2016. “mlr: Machine Learning in R.” <em>Journal of Machine Learning Research</em> 17 (170): 1–5. <a href="http://jmlr.org/papers/v17/15-066.html" class="uri">http://jmlr.org/papers/v17/15-066.html</a>.</p>
</div>
<div>
<p>Goldstein, Alex, Adam Kapelner, Justin Bleich, and Emil Pitkin. 2015. “Peeking Inside the Black Box: Visualizing Statistical Learning with Plots of Individual Conditional Expectation.” <em>Journal of Computational and Graphical Statistics</em> 24 (1): 44–65. doi:<a href="https://doi.org/10.1080/10618600.2014.907095">10.1080/10618600.2014.907095</a>.</p>
</div>
<div>
<p>Greenwell, Brandon M. 2017. “Pdp: An R Package for Constructing Partial Dependence Plots.” <em>The R Journal</em> 9 (1): 421–36. <a href="https://journal.r-project.org/archive/2017/RJ-2017-016/index.html" class="uri">https://journal.r-project.org/archive/2017/RJ-2017-016/index.html</a>.</p>
</div>
<div>
<p>Kennedy, Nick. 2017. <em>Forestmodel: Forest Plots from Regression Models</em>. <a href="https://CRAN.R-project.org/package=forestmodel" class="uri">https://CRAN.R-project.org/package=forestmodel</a>.</p>
</div>
<div>
<p>Lüdecke, Daniel. 2017. <em>SjPlot: Data Visualization for Statistics in Social Science</em>. <a href="https://CRAN.R-project.org/package=sjPlot" class="uri">https://CRAN.R-project.org/package=sjPlot</a>.</p>
</div>
<div>
<p>Ribeiro, Marco Tulio, Sameer Singh, and Carlos Guestrin. 2016. “‘Why Should I Trust You?’: Explaining the Predictions of Any Classifier.” In, 1135–44. ACM Press. doi:<a href="https://doi.org/10.1145/2939672.2939778">10.1145/2939672.2939778</a>.</p>
</div>
<div>
<p>Robinson, David. 2017. <em>Broom: Convert Statistical Analysis Objects into Tidy Data Frames</em>. <a href="https://CRAN.R-project.org/package=broom" class="uri">https://CRAN.R-project.org/package=broom</a>.</p>
</div>
<div>
<p>Sitko, Agnieszka, and Przemyslaw Biecek. 2017. <em>FactorMerger: Hierarchical Algorithm for Post-Hoc Testing</em>. <a href="https://github.com/MI2DataLab/factorMerger" class="uri">https://github.com/MI2DataLab/factorMerger</a>.</p>
</div>
<div>
<p>Staniak, Mateusz, and Przemysław Biecek. 2017. <em>Live: Local Interpretable (Model-Agnostic) Visual Explanations</em>.</p>
</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="reproducibility.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/07-tutorial.Rmd",
"text": "Edit"
},
"download": ["DALEX.pdf", "DALEX.epub"],
"toc": {
"collapse": "subsection"
},
"split_by": "section+number",
"fig.width": 12
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
